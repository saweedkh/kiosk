==========================================
کیوسک - راهنمای نصب و راه‌اندازی
==========================================

این پکیج شامل یک سیستم کیوسک کامل است که به صورت محلی روی ویندوز اجرا می‌شود.

پیش‌نیازها:
-----------
1. Windows 10 یا Windows 11
2. Docker Desktop نصب شده و در حال اجرا
   (دانلود از: https://www.docker.com/products/docker-desktop)

نصب و راه‌اندازی:
-----------------
1. فایل ZIP را Extract کنید
2. Google Chrome را نصب کنید (اگر نصب نشده است)
   دانلود از: https://www.google.com/chrome/
3. Docker Desktop را اجرا کنید و مطمئن شوید که در حال اجرا است
   (دانلود از: https://www.docker.com/products/docker-desktop)
4. فایل .env را بسازید:
   - فایل .env.example را کپی کنید و نام آن را به .env تغییر دهید
   - (در Windows: راست کلیک روی .env.example → Copy → Paste → Rename به .env)
   - یا در Command Prompt: copy .env.example .env
5. (اختیاری) فایل .env را ویرایش کنید و تنظیمات POS و Printer را تغییر دهید
   - اگر از POS یا Printer استفاده می‌کنید، IP و Port را تنظیم کنید
6. فایل run.bat را دوبار کلیک کنید
   - این فایل Docker containers را راه‌اندازی می‌کند
   - سپس Google Chrome را به صورت خودکار در حالت Kiosk (Fullscreen) باز می‌کند
   - کاربر نمی‌تواند از مرورگر خارج شود (فقط با Ctrl+Alt+Del)

توقف برنامه:
-----------
برای توقف برنامه، فایل stop.bat را اجرا کنید.

راه‌اندازی خودکار در Startup:
-----------------------------
برای اینکه برنامه به صورت خودکار هنگام روشن شدن سیستم اجرا شود:

1. فایل setup-startup.bat را با دسترسی Administrator اجرا کنید
   - راست کلیک روی setup-startup.bat → Run as administrator
2. این اسکریپت یک Scheduled Task ایجاد می‌کند که run.bat را هنگام boot اجرا می‌کند
3. برای حذف راه‌اندازی خودکار:
   - Command Prompt را با دسترسی Administrator باز کنید
   - دستور زیر را اجرا کنید:
     schtasks /delete /tn "KioskApp" /f

خروج از حالت Kiosk (کیوسک لمسی):
---------------------------------
برای کیوسک‌های لمسی که موس و کیبورد ندارند:

1. **لمس 5 بار در گوشه بالا راست صفحه** برای باز کردن صفحه مدیریت
   - این gesture صفحه admin را باز می‌کند
   - از صفحه admin می‌توانید وارد پنل مدیریت شوید

2. **راه‌اندازی مجدد سیستم** (Restart):
   - دکمه Power را فشار دهید و نگه دارید
   - یا از طریق Remote Desktop/TeamViewer به سیستم دسترسی داشته باشید
   - یا یک دکمه فیزیکی Reset روی دستگاه نصب کنید

3. **دسترسی فیزیکی به سیستم**:
   - اگر به سیستم دسترسی فیزیکی دارید، می‌توانید:
     - Task Manager را باز کنید (Ctrl+Shift+Esc)
     - یا Command Prompt را باز کنید و دستور زیر را اجرا کنید:
       taskkill /F /IM chrome.exe

4. **برای جلوگیری از خروج**:
   - از نرم‌افزارهای Kiosk Mode استفاده کنید
   - Group Policy را تنظیم کنید تا Task Manager غیرفعال شود
   - یک حساب کاربری محدود ایجاد کنید

محدود کردن دسترسی کاربر:
------------------------
برای محدود کردن دسترسی کاربر به سیستم:

1. یک حساب کاربری محدود (Limited User) ایجاد کنید
2. از Group Policy استفاده کنید تا دسترسی به Task Manager، Registry Editor و ... را محدود کنید
3. از نرم‌افزارهای Kiosk Mode استفاده کنید (مثل Deep Freeze یا SteadyState)
4. Chrome در حالت Kiosk اجرا می‌شود و کاربر نمی‌تواند:
   - از مرورگر خارج شود (فقط با gesture خاص یا restart)
   - به تنظیمات Chrome دسترسی داشته باشد
   - Extension نصب کند
   - Password ذخیره کند
   - Notifications دریافت کند

تنظیمات POS و Printer:
---------------------
اگر از کارت‌خوان (POS) یا پرینتر استفاده می‌کنید:

1. فایل .env را باز کنید و تنظیمات زیر را ویرایش کنید:
   - POS_TCP_HOST: IP آدرس کارت‌خوان (مثلاً 192.168.1.100)
   - POS_TCP_PORT: پورت کارت‌خوان (معمولاً 1362)
   - PRINTER_IP: IP آدرس پرینتر
   - PRINTER_PORT: پورت پرینتر (معمولاً 9100)
   - PRINTER_ENABLED: True (برای فعال کردن پرینتر)
   - PAYMENT_GATEWAY_NAME: pos (برای استفاده از POS واقعی)

2. مطمئن شوید که IP و Port دستگاه‌ها درست است
3. دستگاه‌ها باید در همان شبکه محلی باشند
4. Firewall Windows نباید مانع شود
5. برای جزئیات بیشتر، فایل NETWORK_ACCESS.md را مطالعه کنید

مشکلات رایج:
-----------
1. اگر پورت 80 در حال استفاده است:
   - برنامه‌های دیگر که از پورت 80 استفاده می‌کنند را ببندید
   - یا فایل docker-compose.yml را ویرایش کنید و پورت را تغییر دهید

2. اگر Docker اجرا نمی‌شود:
   - Docker Desktop را Restart کنید
   - مطمئن شوید که Virtualization در BIOS فعال است

3. اگر تصاویر لود نمی‌شوند:
   - چند دقیقه صبر کنید (اولین بار ممکن است طول بکشد)
   - Docker Desktop را Restart کنید

4. اگر نمی‌تواند به POS یا Printer وصل شود:
   - IP و Port را بررسی کنید
   - مطمئن شوید دستگاه‌ها در شبکه هستند
   - Firewall را بررسی کنید
   - فایل NETWORK_ACCESS.md را مطالعه کنید

پشتیبانی:
--------
در صورت بروز مشکل، با تیم پشتیبانی تماس بگیرید.

==========================================

